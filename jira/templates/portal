fields:
  project:
    key: RP
  issuetype:
    name: Deployment
  summary: >-
    Portal: <Team> YYYY-MM-DD
  components: # Values: Access Control, Accounts, Annotations, Automapper, BitSight Labs, BLIS, BRDS, BRIS, bs-components, bs-emr-tools, Business Graph, Collection Management, committed_20190429, CSV Generation, Customer Team, Dark Web, Darwin, Data Ops, Data Refresh, Data Science, Data Source, Data Source Aggregation, Discover, EDS, EM, Entity Data, Entity Management, Entity Pull, Entity-Join, Entity-Sync, Escalations, Evaluations of Data Sources, EventStore, Executive Reports, Feature Extractor, Feeds, First Party, Folders, Frontend, Groma, Group Admin Role, Hadoop, IGOR, Infection Collector Service, Infrastructure, Infrav3, Insights, Instant Gratification, Isopod, JIRA, JS, Kubernetes, Logging, Mailspike, Main Website, milestone, MPS, Ops, Ops : Build, Ops : Chef, Ops : Fabric, Ops : Scripting, Ops : Test, Order Management, Order Mgmt, Pipeline, Portal, Portal : API, Portal : Cluster Curation, Portal : Collection Management, Portal : Customer - Management, Portal : Customer - User, Portal : Entity Management, Portal : Knowledge Base, Portal : Pull Request Tracker, Preprocessors, Quality Assurance, Rapid7, Risk Management, RTA Orchestrator, Salesforce, SAML, Scoring, Scoring Diff, Security Ratings - Customer API, Service Providers, Sovereign Ratings, Sync/Switch Customer Web Portal, Tacyt, Tooling, uTest Testing, WiFense, Zendesk,
  assignee:
    emailAddress: lucas.pickering@bitsighttech.com
  priority: # Values: Blocker, Critical, Major, Minor, Trivial, Low,
    name: Major
  description: |~
    h3. NOTES
    # Please DO NOT CLONE deployment tickets. Instead, create a new ticket by copying the template found at https://bitsight.atlassian.net/wiki/spaces/EN/pages/70713474/Customer+Portal


    h3. PREPARATION

    h4. CHEF
    # Approve and merge the following PR into master
    https://bitbucket.org/colorprinter/chef/pull-requests/
    # Upload bs-customer-portal cookbook with new version

    h4. PORTAL
    # Approve and merge the following PRs to integration branch
    https://bitbucket.org/colorprinter/portal/pull-requests/
    https://bitbucket.org/colorprinter/portal/pull-requests/
    # Run the Portal Performance Test Suite on the integration branch IF:
    ## Your branch can affect the performance of the following api endpoints: /alerts /companies /folders /subscriptions /portfolio /industries /insights
    ## Execute this step by checking the 'run_performance_tests' option of the Portal Test Suite job in the next step
    # Run the Portal Test Suite on the integration branch (this will start E2E tests also)
    http://bs102.ops.ame1.bitsighttech.com:8080/job/Test/job/PortalTestSuiteIntegration/
    # Run *precalc* tests if needed.
    # Add changelog entry and bump version (e.g. `invoke bump -m "AP: New feature"`)
    # Cross check environment variable changes with settings.py
    # Approve & merge the integration branch PR below into master
    https://bitbucket.org/colorprinter/portal/pull-requests/


    h3. DEPLOYMENT
    # Deploy master to cp101.stu1, cp101.stg1, and cp101/102 in production with Jenkins
    http://bs102.ops.ame1.bitsighttech.com:8080/job/Portal/job/ReleasePortal/
    # As each subnet is deployed:
    ## Verify hash deployed is head of master
    ## Verify basic portal functionality and UI
    ## Verify __something unique to this release__


    h3. ON-CALL CONTACTS
    || Group || Who || Sign off ||
    | Development | xxx | (x) |
    | Ops | xxx | (x) |
    | QA | xxx | (x) |
  labels:
  versions:
    - name: Onboarding Workflow
